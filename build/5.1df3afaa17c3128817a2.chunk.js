webpackJsonp([5],{"./app/containers/App/selectors.js":function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"a",function(){return i});var o=r("./node_modules/reselect/es/index.js"),n=function(e){return e.get("route")},a=function(e){return e.get("global")},s=function(){return Object(o.a)(n,function(e){return e.get("location").toJS()})},i=function(){return Object(o.a)(a,function(e){return e.toJS()})}},"./app/containers/LoginPage/index.js":function(e,t,r){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments[1];switch(t.type){case P:return e.set("loading",!0).set("error",!1).setIn(["user","email"],t.data.email).setIn(["user","password"],t.data.password).setIn(["user","rememberMe"],t.data.rememberMe).setIn(["user","otpToken"],t.data.otpToken).setIn(["user","captcha"],t.data.captcha);case L:return e.set("loading",!1).set("error",!1).set("errorMessage",!1);case A:return t.error?e.set("error",!0).set("errorMessage",t.error).set("loading",!1):e.set("error",!0).set("loading",!1);case C:return e.set("errorMessage",!1).set("error",!1);case I:return e.set("emailVerified",!0).set("initialEmail",t.data);default:return e}}function n(e){return{type:P,data:e}}function a(e){return{type:L,userData:e}}function s(e){return{type:A,error:e}}function i(){return{type:C}}function c(){return{type:M}}function u(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(F.c)(_());case 3:return e=r.sent,r.next=6,Object(F.a)(G.a.user.login,e);case 6:if(t=r.sent,!t.success){r.next=19;break}return localStorage.setItem("token",t.authToken),r.next=11,Object(F.b)(a());case 11:return r.next=13,Object(F.b)(Object(V.k)(t.is2FA_enabled));case 13:return r.next=15,Object(F.b)(Object(w.push)("/dashboard"));case 15:return r.next=17,Object(F.b)(Object(V.g)());case 17:r.next=26;break;case 19:if(t.success){r.next=26;break}return r.next=22,Object(F.b)(s(t.message));case 22:return r.next=24,Object(F.b)(i());case 24:return r.next=26,Object(F.b)(Object(V.g)());case 26:r.next=32;break;case 28:return r.prev=28,r.t0=r.catch(0),r.next=32,Object(F.b)(i());case 32:case"end":return r.stop()}},D,this,[[0,28]])}function l(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.e)(P,u);case 2:case"end":return e.stop()}},J,this)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e){return{dispatch:e,push:function(t){return e(Object(w.push)(t))},login:function(t){return e(Object(V.l)(t))},loginUser:function(t){return e(n(t))},removeError:function(){return e(i())},removeErrorGlobal:function(){return e(Object(V.g)())},disabled2fa:function(){return e(Object(V.j)())},stateClear:function(){return e(c())},removeOuterError:function(){return e(Object(V.h)())},removeInnerReset:function(){return e(Object(V.f)())}}}Object.defineProperty(t,"__esModule",{value:!0});var g=r("./node_modules/react/react.js"),b=r.n(g),v=(r("./node_modules/prop-types/index.js"),r("./node_modules/react-redux/es/index.js")),h=r("./node_modules/reselect/es/index.js"),y=r("./node_modules/redux/es/index.js"),j=r("./node_modules/react-toastify/lib/index.js"),O=r("./node_modules/react-router-dom/index.js"),k=r("./app/utils/injectSaga.js"),w=r("./node_modules/react-router-redux/index.js"),N=r("./node_modules/glamor/lib/index.js"),x=r("./app/utils/injectReducer.js"),S=function(e){return e.get("loginPage")},_=function(){return Object(h.a)(S,function(e){return e.get("user").toJS()})},E=r("./app/containers/App/selectors.js"),R=r("./node_modules/immutable/dist/immutable.js"),P="LoginPage/LOGIN_USER",L="LoginPage/LOGIN_USER_SUCCESS",A="LoginPage/LOGIN_USER_ERROR",C="LoginPage/LOGIN_USER_ERROR_MESSAGE_REMOVE",I="LoginPage/EMAIL_VERIFIED",M="LoginPage/EMAIL_STATE_CLEAR",T=Object(R.fromJS)({loading:!1,error:!1,errorMessage:!1,user:{email:"",password:"",rememberMe:!1,otpToken:"",captcha:""},emailVerified:!1,initialEmail:!1}),U=o,F=r("./node_modules/redux-saga/es/effects.js"),V=r("./app/containers/App/actions.js"),G=r("./app/utils/api.js"),D=regeneratorRuntime.mark(u),J=regeneratorRuntime.mark(l),q=r("./node_modules/react-google-recaptcha/lib/recaptcha-wrapper.js"),Y=r.n(q);r.d(t,"LoginPage",function(){return re});var H=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,r,o,n){var a=t&&t.defaultProps,s=arguments.length-3;if(r||0===s||(r={}),r&&a)for(var i in a)void 0===r[i]&&(r[i]=a[i]);else r||(r=a||{});if(1===s)r.children=n;else if(s>1){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+3];r.children=c}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}(),Q=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),B=H(O.Redirect,{to:"/dashboard"}),$=H("header",{className:"header"},void 0,H("div",{className:"container"},void 0,H("div",{className:"row"},void 0,H("div",{className:"col-xs-5 col-sm-6 col-sm-6 col-md-2 clearfix"},void 0,H("div",{className:"logo"},void 0,H(O.Link,{to:"/"},void 0," ",H("img",{src:"assets/img/logo.svg",alt:"QUILLHASH"})))),H("div",{className:"col-xs-7 col-sm-6 col-md-10"},void 0,H("div",{className:"header-right"},void 0,H("div",{className:"header-btn-group"},void 0,H("div",{className:"header-btn"},void 0,H(O.Link,{to:"/signup"},void 0,"Sign Up")))))))),K=H("div",{className:"card-header"},void 0,H("h1",{},void 0,"Sign In")),W=H("div",{className:"form-group"},void 0,H("label",{htmlFor:"emailAddress",className:"form-label"},void 0,"Email Address"),H("input",{id:"emailAddress",type:"email",name:"email",className:"form-input form-control",placeholder:"Your Email",required:!0,autoComplete:"email"})),z=H("div",{className:"form-group"},void 0,H("label",{htmlFor:"password",className:"form-label"},void 0,"Password"),H("input",{id:"password",type:"password",className:"form-input form-control",name:"password",placeholder:"Your Password",autoComplete:"off",required:!0})),X=H("div",{className:"form-group"},void 0,H("label",{htmlFor:"token",className:"form-label"},void 0,"Two-Factor Code (if enabled)"),H("input",{id:"token",type:"number",name:"token",className:"form-input form-control",placeholder:"Google Authenticator",autoComplete:"off"})),Z=H("div",{className:"text-center"},void 0,H("button",{type:"submit",className:"form-button"},void 0,"Sign In")),ee=H("div",{className:"forgot"},void 0,H(O.Link,{to:"/forgotPassword"},void 0,"Forgot Password?")),te=H("div",{className:"forgot"},void 0,H(O.Link,{to:"/resendConfirmation"},void 0,"Didn't receive confirmation instructions?")),re=function(e){function t(e){d(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={"g-recaptcha-response":"",captcha:!1},r.formSubmit=r.formSubmit.bind(r),r.notify=r.notify.bind(r),r.formValidation=r.formValidation.bind(r),r.onChange=r.onChange.bind(r),r}return p(t,e),Q(t,[{key:"componentDidMount",value:function(){if(this.props.removeInnerReset(),this.props.global.passwordResetSuccess&&this.notifySuccess("Your password has been changed successfully"),this.props.global.resetOuterError&&(this.notify("Invalid URL ,Try again with valid url"),this.props.removeOuterError()),this.props.error&&this.notify(this.props.errorMessage),this.props.global.initialEmail.length>0){this.notifySuccess("Your account has been verified.");document.getElementById("emailAddress").value=this.props.global.initialEmail}}},{key:"componentWillReceiveProps",value:function(e){e.error&&this.notify(e.errorMessage)}},{key:"shouldComponentUpdate",value:function(e){if(e)return!0}},{key:"onChange",value:function(e){this.setState({"g-recaptcha-response":e}),e.length>0&&this.setState({captcha:!0})}},{key:"notify",value:function(e){j.toast.error(H("h5",{},void 0,e))}},{key:"notifySuccess",value:function(e){j.toast.success(e)}},{key:"formValidation",value:function(e){var t=e.email,r=e.password;return t.length<=0?(this.notify("Enter your Email"),!1):0===r.length?(this.notify("Enter your password"),!1):!!r.length&&(r.length>0&&t.length>0&&(this.setState({captcha:!1}),window.grecaptcha.reset(),!0))}},{key:"formSubmit",value:function(e){e.preventDefault();var t=document.getElementById("remember"),r=void 0;r=!!t.checked;var o={email:e.target[0].value,password:e.target[1].value,otpToken:e.target[2].value,rememberMe:r,captcha:this.state["g-recaptcha-response"]};this.formValidation(o)?(this.props.loginUser(o),this.props.login()):this.notify("Something went wrong")}},{key:"render",value:function(){return localStorage.token?B:H("div",{className:"signin"},void 0,H(j.ToastContainer,{position:"top-center",progressClassName:Object(N.css)({height:"100px"}),type:"error",autoClose:2800,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!1}),H("div",{className:"wrapper"},void 0,$,H("section",{className:"signin-block login"},void 0,H("div",{className:"container"},void 0,H("div",{className:"row"},void 0,H("div",{className:"col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"},void 0,K,H("div",{className:"signin-card-body"},void 0,H("form",{className:!0,onSubmit:this.formSubmit},void 0,W,z,X,H("div",{className:"form-group text-center"},void 0,b.a.createElement(Y.a,{type:"image",ref:"recaptcha",className:"form-captcha",required:!0,sitekey:"6LcHp2QUAAAAAFNkyK9wjYnRjdR4QyPdQMAJSPDC",onChange:this.onChange})),H("div",{className:"form-group text-center"},void 0,H("label",{className:"form-check-label",htmlFor:"user_accepted_policies"},void 0,H("input",{id:"remember",className:"boolean required form-check-input",label:"false","data-title":"Remember me!","data-placement":"left","data-trigger":"manual","data-offset":"0, 55","aria-required":"true",type:"checkbox",name:"remember",style:{marginRight:"10px"}}),"Remember me")),Z,ee,te))))))))}}]),t}(b.a.PureComponent),oe=Object(h.b)({user:_(),errorMessage:function(){return Object(h.a)(S,function(e){return e.get("errorMessage")})}(),global:Object(E.a)(),error:function(){return Object(h.a)(S,function(e){return e.get("error")})}()}),ne=Object(v.b)(oe,f),ae=Object(x.a)({key:"loginPage",reducer:U}),se=Object(k.a)({key:"loginPage",saga:l});t.default=Object(y.compose)(ae,se,ne)(re)}});